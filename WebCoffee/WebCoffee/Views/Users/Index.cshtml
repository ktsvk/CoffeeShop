@{
    ViewData["Title"] = "Account";
}
@model IEnumerable<ApplicationUser>

<div class="main-page">
    <div class="users">
        @foreach (var user in Model)
        {
            <div class="user @(user.Deleted?"deleted_user":"")">
                <a asp-controller="Manage" asp-action="Index" asp-route-id="@user.Id">
                    Email: @user.Email
                </a>
                <div>
                    Name: @user.Name
                </div>
                @if (user.Deleted)
                {
                    <form method="post" asp-controller="Users" asp-action="UnDelete" asp-route-id="@user.Id">
                        <input type="submit" value="Восстановить" />
                    </form>
                }
                else
                {
                    <form method="post" asp-controller="Users" asp-action="Delete" asp-route-id="@user.Id">
                        <input type="submit" value="Удалить" />
                    </form>
                }
                <form id="sendmess_form" method="post" asp-controller="Users" asp-action="SendMessage" asp-route-id="@user.Id">
                    <input type="text" name="message" />
                    <input type="submit" value="Отправить" />
                </form>
                <button id="sendmess">
                    Отправить сообщение
                </button>
            </div>
        }
    </div>
    
</div>